<div class="common-order-block">
    <div>
        <div class="well pull-left event-detail-bloc">
            <div class="col-md-6 md-text">
                {{event.name}}
            </div>
            <div class="col-md-offset-10 event-date-font-size">
                <div class="col-md-offset-5">
                    <div class="event-list-date pull-right">
                        <p class="row">
                        <p class="text-center" style="font-size: 30px">{{event.date.dayOfMonth}}</p>
                        <p class="text-center" style="font-size: 24px"> {{event.date.month | limitTo: 3 | lowercase | capitalize}}</p>
                        <p style="font-size: 22px"> {{event.date.year}}</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 create-event-user-text">Created by {{event.user.name}}</div>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-md-12" style="padding-bottom: 20px"><h1 class="text-center">Order details</h1></div>
        <div>
            <div class="col-md-12 restaurant-phone-block">
                <h1 class="inline">{{restaurant.name}}</h1>
                <h3 class="restaurant-phone"><i class="fa fa-phone" aria-hidden="true"></i> {{restaurant.phone}}
                </h3>
                <h3 ng-if="order.status == 'FREEZE'" class="inline restaurant-phone">Order status: frozen </h3>
                <button class="order-status-btn btn btn btn-primary" style="margin-top: -22px;" ng-if="order.status == 'PENDING'"
                        ng-click="changeOrderStatusToFreeze(orderId)">freeze order
                </button>
                <form class="inline" style="margin-top: -22px;" ng-if="order.status == 'FREEZE'">
                    <input ng-model="splitBillId" class="form-control inline" placeholder="split-bill event id" type="text" style="width: 150px; margin-left: 40px" required>
                <button class=" btn btn-primary"
                        ng-click="changeOrderStatusToBill(orderId, splitBillId)">Split-bill
                </button>
                </form>
                <h2 class="inline order-status-btn" ng-if="order.status == 'SPLIT_BILL'">
                    Order send to spit-bill
                </h2>


            </div>
        </div>
    </div>
    <div>
            <table class="table table-bordered table-responsive">
                <tr>
                    <th>Name</th>
                    <th>Amount</th>
                    <th>Price</th>
                    <th>Cost</th>
                </tr>
                <tr ng-repeat="item in myOrders| orderBy:'restaurant.name'" class="items">
                    <td>{{item.item.name}}</td>
                    <td>
                        <change-item-amount-directive amount="item.itemAmount" item-id="{{item.item.id}}" order-id="{{orderId}}" item-name="{{item.item.name}}"></change-item-amount-directive>
                    </td>
                    <td>
                        <div style="width: 60px">
                            <a href="#" editable-text="item.item.price" onbeforesave="updatePrice(item.item.id, $data)">{{ item.item.price || 'set price ' }}&#8372</a>
                        </div>
                    </td>
                    <td>
                        {{item.itemAmount * item.item.price|currency:" "}}&#8372
                    </td>
                </tr>
                <tr>
                    <td><h4>Total</h4></td>
                    <td></td>
                    <td></td>
                    <td>
                        <div class=""><h4>{{getTotal() |currency:" "}}&#8372</h4></div>
                    </td>
                </tr>
            </table>
    </div>
</div>


